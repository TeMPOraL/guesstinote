<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guesstinote</title>
    <!-- Modularized CSS -->
    <link rel="stylesheet" href="css/layout/app-layout.css">
    <link rel="stylesheet" href="css/components/editor.css">
    <link rel="stylesheet" href="css/components/cell-widget.css">
    <link rel="stylesheet" href="css/components/histogram.css">
    <!-- <link rel="stylesheet" href="css/style.css"> --> {/* Original stylesheet, now replaced */}

    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="vendor/codemirror-5.65.19/lib/codemirror.css">
</head>
<body>
    <header>
        <h1>Guesstinote</h1>
        <div class="document-controls">
            <label for="docName">Document Name:</label>
            <input type="text" id="docName" value="My Guesstimate">
            <button id="newDocBtn">New</button>
            <button id="saveDocBtn">Save</button>
            <button id="loadDocBtn">Load</button> <!-- This might be a dropdown or a modal later -->
        </div>
        <div class="io-controls">
            <button id="exportDocBtn">Export (Copy Text)</button>
            <button id="importDocBtn">Import (Paste Text)</button>
        </div>
    </header>

    <main>
        <textarea id="htmlEditor" spellcheck="false"></textarea>
        <div id="resizer"></div>
        <div id="previewPane"></div>
    </main>

    <footer>
        <p>Guesstinote - Client-Side Probabilistic Notepad</p>
        <p>Global Samples: <input type="number" id="globalSamplesInput" value="5000" min="100" step="100"></p>
    </footer>

    <!-- CodeMirror JS -->
    <script src="vendor/codemirror-5.65.19/lib/codemirror.js"></script>
    <script src="vendor/codemirror-5.65.19/mode/xml/xml.js"></script>
    <script src="vendor/codemirror-5.65.19/mode/javascript/javascript.js"></script>
    <script src="vendor/codemirror-5.65.19/mode/css/css.js"></script>
    <script src="vendor/codemirror-5.65.19/mode/htmlmixed/htmlmixed.js"></script>

    <!-- Core Modules -->
    <script src="js/config.js"></script>
    <script src="js/utils/Tutorial.js"></script> <!-- Moved from js/tutorial.js -->
    
    <!-- Formula Processing -->
    <script src="js/formula/FormulaParser.js"></script> <!-- Moved from js/formula_parser.js -->
    
    <!-- Math Libraries -->
    <script src="js/math/DistributionGenerator.js"></script>
    <script src="js/math/DistributionMath.js"></script>
    <script src="js/math/StatisticsCalculator.js"></script>
    
    <!-- Evaluator (depends on Math and FormulaParser) -->
    <script src="js/formula/Evaluator.js"></script> <!-- Moved from js/evaluator.js -->

    <!-- Cell Logic (depends on Evaluator, Math libs, FormulaParser) -->
    <script src="js/cell/Cell.js"></script> <!-- Moved from js/cell.js -->
    <script src="js/cell/CellsCollectionManager.js"></script>

    <!-- UI Rendering (depends on Cell, HistogramRenderer) -->
    <script src="js/ui/HistogramRenderer.js"></script>
    <script src="js/ui/CellRenderer.js"></script> <!-- Moved from js/renderer.js -->

    <!-- Custom Elements (depends on CellRenderer, Cell) -->
    <script src="js/elements/GCellElement.js"></script>
    <script src="js/elements/GRefElement.js"></script>

    <!-- Persistence -->
    <script src="js/persistence/Persistence.js"></script> <!-- Moved from js/persistence.js -->

    <!-- Calculation Manager (depends on CellsCollectionManager, Cell) -->
    <script src="js/calculation/CalculationManager.js"></script>

    <!-- Main Application Logic (depends on many above, including CalculationManager) -->
    <script src="js/main.js"></script>

    <!-- Legacy/Other -->
    <script src="js/parser.js"></script> <!-- Role significantly reduced, review for removal later -->
    <!-- js/calculator.js is now deprecated and its script tag removed -->
</body>
</html>
